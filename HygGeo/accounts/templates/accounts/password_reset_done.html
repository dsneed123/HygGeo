{% extends 'base.html' %}

{% block title %}Reset Link Sent - HygGeo{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-6 col-lg-5">
            <div class="card card-hygge p-4">
                <div class="text-center mb-4">
                    <i class="fas fa-paper-plane text-success" style="font-size: 3rem;"></i>
                    <h2 class="h3 fw-bold mt-3" style="color: var(--hygge-green);">Check Your Email!</h2>
                    <p class="text-muted">We've sent you a password reset link</p>
                </div>

                <div class="alert alert-success alert-custom mb-4">
                    <i class="fas fa-check-circle me-2"></i>
                    <strong>Email Sent!</strong> If an account with that email address exists,
                    we've sent you a secure link to reset your password.
                </div>

                <div class="text-center mb-4">
                    <p class="text-muted">
                        We've sent a password reset link to your email address.
                        Click the link in the email to create a new password for your account.
                    </p>
                </div>

                <!-- Instructions -->
                <div class="alert alert-info alert-custom mb-4">
                    <i class="fas fa-info-circle me-2"></i>
                    <strong>What to do next:</strong>
                    <ol class="mb-0 mt-2">
                        <li>Check your email inbox</li>
                        <li>Look for an email from HygGeo</li>
                        <li>Click the reset link in the email</li>
                        <li>Create your new password</li>
                    </ol>
                </div>

                <!-- Troubleshooting -->
                <div class="alert alert-warning alert-custom mb-4">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    <strong>Don't see the email?</strong>
                    <ul class="mb-0 mt-2">
                        <li>Check your spam/junk folder</li>
                        <li>Make sure you entered the correct email</li>
                        <li>The link expires in 1 hour for security</li>
                        <li>Wait a few minutes - emails can take time</li>
                    </ul>
                </div>

                <div class="d-grid gap-2 mb-4">
                    <a href="{% url 'password_reset' %}" class="btn btn-outline-hygge py-3 fw-bold">
                        <i class="fas fa-redo me-2"></i>Send Another Link
                    </a>

                    <a href="{% url 'login' %}" class="btn btn-hygge py-3 fw-bold">
                        <i class="fas fa-arrow-left me-2"></i>Back to Login
                    </a>
                </div>

                <!-- Security Notice -->
                <div class="mt-4 pt-4 border-top">
                    <div class="p-3 rounded text-center" style="background-color: var(--hygge-cream);">
                        <h6 class="fw-bold mb-2" style="color: var(--hygge-green);">
                            <i class="fas fa-shield-alt me-2"></i>Your Security is Important
                        </h6>
                        <p class="small text-muted mb-0">
                            For your protection, password reset links expire after 1 hour.
                            If you didn't request this reset, you can safely ignore this email.
                            Your account remains secure.
                        </p>
                    </div>
                </div>

                <!-- Email Client Quick Links -->
                <div class="row mt-4 g-2">
                    <div class="col-4">
                        <a href="https://mail.google.com" target="_blank" class="btn btn-outline-primary w-100 py-2">
                            <i class="fab fa-google me-1"></i>
                            <small>Gmail</small>
                        </a>
                    </div>
                    <div class="col-4">
                        <a href="https://outlook.live.com" target="_blank" class="btn btn-outline-primary w-100 py-2">
                            <i class="fab fa-microsoft me-1"></i>
                            <small>Outlook</small>
                        </a>
                    </div>
                    <div class="col-4">
                        <a href="https://mail.yahoo.com" target="_blank" class="btn btn-outline-primary w-100 py-2">
                            <i class="fab fa-yahoo me-1"></i>
                            <small>Yahoo</small>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.alert-custom {
    border: none;
    border-radius: 10px;
    padding: 15px;
}

.alert-success {
    background-color: rgba(25, 135, 84, 0.1);
    color: #198754;
}

.alert-info {
    background-color: rgba(13, 110, 253, 0.1);
    color: #0d6efd;
}

.alert-warning {
    background-color: rgba(255, 193, 7, 0.1);
    color: #fd7e14;
}

ol, ul {
    padding-left: 1.2rem;
}

ol li, ul li {
    margin-bottom: 0.25rem;
    font-size: 0.9rem;
}

.btn-outline-primary {
    border-color: var(--hygge-light-green);
    color: var(--hygge-green);
    font-size: 0.875rem;
}

.btn-outline-primary:hover {
    background-color: var(--hygge-green);
    border-color: var(--hygge-green);
    color: white;
}

/* Email sent animation */
@keyframes fly {
    0% {
        transform: translateX(0) translateY(0) rotate(0deg);
    }
    50% {
        transform: translateX(10px) translateY(-5px) rotate(15deg);
    }
    100% {
        transform: translateX(0) translateY(0) rotate(0deg);
    }
}

.fa-paper-plane {
    animation: fly 2s ease-in-out infinite;
}
</style>

<script>
// Add subtle animations
document.addEventListener('DOMContentLoaded', function() {
    const card = document.querySelector('.card-hygge');
    card.style.opacity = '0';
    card.style.transform = 'translateY(30px)';

    setTimeout(() => {
        card.style.transition = 'all 0.6s ease';
        card.style.opacity = '1';
        card.style.transform = 'translateY(0)';
    }, 100);

    // Auto-refresh reminder
    let timeLeft = 300; // 5 minutes
    const refreshReminder = document.createElement('div');
    refreshReminder.id = 'refresh-reminder';
    refreshReminder.className = 'alert alert-info alert-custom mt-3';
    refreshReminder.style.display = 'none';

    const card_container = document.querySelector('.card-hygge');
    card_container.appendChild(refreshReminder);

    // Show refresh reminder after 5 minutes
    setTimeout(() => {
        refreshReminder.style.display = 'block';
        refreshReminder.innerHTML = `
            <i class="fas fa-clock me-2"></i>
            <strong>Still waiting for the email?</strong> Try refreshing your inbox or check your spam folder.
            <button class="btn btn-sm btn-outline-primary ms-2" onclick="location.reload()">
                <i class="fas fa-sync me-1"></i>Refresh Page
            </button>
        `;
    }, 300000); // 5 minutes
});
</script>
{% endblock %}